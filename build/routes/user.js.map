{"version":3,"sources":["../../src/routes/user.js"],"names":["module","exports","app","post","passport","authenticate","session","config","accessLevels","admin","create","login","get","findAllUsers","client","findById","put","update","delete","deleteUser"],"mappings":";;AAAA;;;;AACA;;;;AACA;;AACA;;;;AASAA,OAAOC,OAAP,GAAiB,eAAO;AACtB;AACAC,MAAIC,IAAJ,CACE,mBADF,EAEEC,mBAASC,YAAT,CAAsB,KAAtB,EAA6B,EAAEC,SAAS,KAAX,EAA7B,CAFF,EAGE,6BAAUC,iBAAOC,YAAP,CAAoBC,KAA9B,EAAqCC,YAArC,CAHF;;AAMA;AACAR,MAAIC,IAAJ,CAAS,kBAAT,EAA6BQ,WAA7B;;AAEA;AACAT,MAAIU,GAAJ,CACE,YADF,EAEER,mBAASC,YAAT,CAAsB,KAAtB,EAA6B;AAC3BC,aAAS;AADkB,GAA7B,CAFF,EAKE,6BAAUC,iBAAOC,YAAP,CAAoBC,KAA9B,EAAqCI,kBAArC,CALF;;AAQA;AACAX,MAAIU,GAAJ,CACE,oBADF,EAEER,mBAASC,YAAT,CAAsB,KAAtB,EAA6B;AAC3BC,aAAS;AADkB,GAA7B,CAFF,EAKE,6BAAUC,iBAAOC,YAAP,CAAoBM,MAA9B,EAAsCC,cAAtC,CALF;;AAQA;AACAb,MAAIc,GAAJ,CACE,oBADF,EAEEZ,mBAASC,YAAT,CAAsB,KAAtB,EAA6B;AAC3BC,aAAS;AADkB,GAA7B,CAFF,EAKE,6BAAUC,iBAAOC,YAAP,CAAoBM,MAA9B,EAAsCG,YAAtC,CALF;;AAQA;AACAf,MAAIgB,MAAJ,CACE,oBADF,EAEEd,mBAASC,YAAT,CAAsB,KAAtB,EAA6B;AAC3BC,aAAS;AADkB,GAA7B,CAFF,EAKE,6BAAUC,iBAAOC,YAAP,CAAoBC,KAA9B,EAAqCU,gBAArC,CALF;AAOD,CA9CD","file":"user.js","sourcesContent":["import passport from \"passport\";\nimport config from \"../config/config\";\nimport { allowOnly } from \"../services/routesHelper\";\nimport {\n  create,\n  login,\n  findAllUsers,\n  findById,\n  update,\n  deleteUser\n} from \"../controllers/user\";\n\nmodule.exports = app => {\n  // create a new user\n  app.post(\n    \"/api/users/create\",\n    passport.authenticate(\"jwt\", { session: false }),\n    allowOnly(config.accessLevels.admin, create)\n  );\n\n  // user login\n  app.post(\"/api/users/login\", login);\n\n  //retrieve all users\n  app.get(\n    \"/api/users\",\n    passport.authenticate(\"jwt\", {\n      session: false\n    }),\n    allowOnly(config.accessLevels.admin, findAllUsers)\n  );\n\n  // retrieve user by id\n  app.get(\n    \"/api/users/:userId\",\n    passport.authenticate(\"jwt\", {\n      session: false\n    }),\n    allowOnly(config.accessLevels.client, findById)\n  );\n\n  // update a user with id\n  app.put(\n    \"/api/users/:userId\",\n    passport.authenticate(\"jwt\", {\n      session: false\n    }),\n    allowOnly(config.accessLevels.client, update)\n  );\n\n  // delete a user\n  app.delete(\n    \"/api/users/:userId\",\n    passport.authenticate(\"jwt\", {\n      session: false\n    }),\n    allowOnly(config.accessLevels.admin, deleteUser)\n  );\n};\n"]}