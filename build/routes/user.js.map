{"version":3,"sources":["../../src/routes/user.js"],"names":["module","exports","app","post","create","login","get","passport","authenticate","session","me","config","accessLevels","admin","findAllUsers","findById","put","update","delete","deleteUser"],"mappings":";;AAAA;;;;AACA;;;;AACA;;AACA;;;;AAUAA,OAAOC,OAAP,GAAiB,eAAO;AACtB;AACAC,MAAIC,IAAJ,CAAS,mBAAT,EAA8BC,YAA9B;;AAEA;AACAF,MAAIC,IAAJ,CAAS,kBAAT,EAA6BE,WAA7B;;AAEA;AACAH,MAAII,GAAJ,CAAQ,eAAR,EAAyBC,mBAASC,YAAT,CAAsB,KAAtB,EAA6B,EAACC,SAAS,KAAV,EAA7B,CAAzB,EAAyEC,QAAzE;;AAEA;AACAR,MAAII,GAAJ,CACE,YADF,EAEEC,mBAASC,YAAT,CAAsB,KAAtB,EAA6B;AAC3BC,aAAS;AADkB,GAA7B,CAFF,EAKE,6BAAUE,iBAAOC,YAAP,CAAoBC,KAA9B,EAAqCC,kBAArC,CALF;;AAQA;AACAZ,MAAII,GAAJ,CACE,oBADF,EAEEC,mBAASC,YAAT,CAAsB,KAAtB,EAA6B;AAC3BC,aAAS;AADkB,GAA7B,CAFF,EAKE,6BAAUE,iBAAOC,YAAP,CAAoBC,KAA9B,EAAqCE,cAArC,CALF;;AAQA;AACAb,MAAIc,GAAJ,CACE,oBADF,EAEET,mBAASC,YAAT,CAAsB,KAAtB,EAA6B;AAC3BC,aAAS;AADkB,GAA7B,CAFF,EAKE,6BAAUE,iBAAOC,YAAP,CAAoBC,KAA9B,EAAqCI,YAArC,CALF;;AAQA;AACAf,MAAIgB,MAAJ,CACE,oBADF,EAEEX,mBAASC,YAAT,CAAsB,KAAtB,EAA6B;AAC3BC,aAAS;AADkB,GAA7B,CAFF,EAKE,6BAAUE,iBAAOC,YAAP,CAAoBC,KAA9B,EAAqCM,gBAArC,CALF;AAOD,CA7CD","file":"user.js","sourcesContent":["import passport from 'passport';\nimport config from '../config/config';\nimport {allowOnly} from '../services/routesHelper';\nimport {\n  create,\n  login,\n  me,\n  findAllUsers,\n  findById,\n  update,\n  deleteUser,\n} from '../controllers/user';\n\nmodule.exports = app => {\n  // create a new user\n  app.post('/api/users/create', create);\n\n  // user login\n  app.post('/api/users/login', login);\n\n  // get current user\n  app.get('/api/users/me', passport.authenticate('jwt', {session: false}), me);\n\n  //retrieve all users\n  app.get(\n    '/api/users',\n    passport.authenticate('jwt', {\n      session: false,\n    }),\n    allowOnly(config.accessLevels.admin, findAllUsers),\n  );\n\n  // retrieve user by id\n  app.get(\n    '/api/users/:userId',\n    passport.authenticate('jwt', {\n      session: false,\n    }),\n    allowOnly(config.accessLevels.admin, findById),\n  );\n\n  // update a user with id\n  app.put(\n    '/api/users/:userId',\n    passport.authenticate('jwt', {\n      session: false,\n    }),\n    allowOnly(config.accessLevels.admin, update),\n  );\n\n  // delete a user\n  app.delete(\n    '/api/users/:userId',\n    passport.authenticate('jwt', {\n      session: false,\n    }),\n    allowOnly(config.accessLevels.admin, deleteUser),\n  );\n};\n"]}